# =============================================================================
# PostgREST Configuration
# =============================================================================

# Database connection
db-uri = "postgres://authenticator:change_me_in_production@db:5432/mec"

# Schema to expose (api schema contains our views and functions)
db-schemas = "api"

# Anonymous role (for unauthenticated requests)
db-anon-role = "mec_anon"

# JWT settings
jwt-secret = "@/etc/postgrest/jwt-secret.txt"
jwt-aud = "mec-service"

# Role claim in JWT (determines which role to switch to)
jwt-role-claim-key = ".role"

# Server settings
server-host = "0.0.0.0"
server-port = 3000

# Request limits
db-pool = 10
db-pool-acquisition-timeout = 10

# Logging
log-level = "info"

# OpenAPI
openapi-mode = "follow-privileges"
openapi-server-proxy-uri = "http://localhost:8000/api"

# Extra search path for functions
db-extra-search-path = "public"

# Pre-request function (optional - for logging/validation)
# db-pre-request = "api.pre_request"

# Max rows returned
max-rows = 1000
